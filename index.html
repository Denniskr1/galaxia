<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Feliz San Valent√≠n ‚ù§Ô∏è</title>

<style>
body { margin:0; overflow:hidden; background:black; }
canvas { display:block; }
</style>
</head>
<body>

<audio id="music" loop>
<source src="thoseeyes.mp3" type="audio/mpeg">
</audio>

<script type="module">

import * as THREE from 'https://cdn.jsdelivr.net/npm/three@0.160.0/build/three.module.js';
import { OrbitControls } from 'https://cdn.jsdelivr.net/npm/three@0.160.0/examples/jsm/controls/OrbitControls.js';
import { FontLoader } from 'https://cdn.jsdelivr.net/npm/three@0.160.0/examples/jsm/loaders/FontLoader.js';
import { TextGeometry } from 'https://cdn.jsdelivr.net/npm/three@0.160.0/examples/jsm/geometries/TextGeometry.js';

const scene = new THREE.Scene();
scene.fog = new THREE.FogExp2(0x000000, 0.0008);

const camera = new THREE.PerspectiveCamera(70, innerWidth/innerHeight, 0.1, 10000);
camera.position.set(0,400,900);

const renderer = new THREE.WebGLRenderer({ antialias:true });
renderer.setSize(innerWidth, innerHeight);
renderer.setPixelRatio(devicePixelRatio);
document.body.appendChild(renderer.domElement);

const controls = new OrbitControls(camera, renderer.domElement);
controls.enableDamping = true;
controls.minDistance = 200;
controls.maxDistance = 3000;

/////////////////////////////////////////////////////
// üåü PISO DE ESTRELLAS
/////////////////////////////////////////////////////

const starsGeometry = new THREE.BufferGeometry();
const starCount = 80000;
const positions = new Float32Array(starCount * 3);

for(let i=0;i<starCount;i++){
positions[i*3] = (Math.random()-0.5)*6000;
positions[i*3+1] = (Math.random()-0.5)*600;
positions[i*3+2] = (Math.random()-0.5)*6000;
}

starsGeometry.setAttribute('position', new THREE.BufferAttribute(positions,3));

const starsMaterial = new THREE.PointsMaterial({
color:0xffffff,
size:1.5
});

const stars = new THREE.Points(starsGeometry, starsMaterial);
scene.add(stars);

/////////////////////////////////////////////////////
// üíó ANILLO ROSA BRILLANTE
/////////////////////////////////////////////////////

const ringGeometry = new THREE.TorusGeometry(250, 40, 64, 200);
const ringMaterial = new THREE.MeshBasicMaterial({
color:0xff00cc
});
const ring = new THREE.Mesh(ringGeometry, ringMaterial);
ring.rotation.x = Math.PI/2;
scene.add(ring);

const coreGeometry = new THREE.SphereGeometry(150, 64, 64);
const coreMaterial = new THREE.MeshBasicMaterial({ color:0xff1493 });
const core = new THREE.Mesh(coreGeometry, coreMaterial);
scene.add(core);

/////////////////////////////////////////////////////
// üß∏ OSITOS (EMOJIS COMO SPRITES)
/////////////////////////////////////////////////////

const loader = new THREE.TextureLoader();
const bearTexture = loader.load("https://i.imgur.com/6X4H0qO.png");

for(let i=0;i<15;i++){
const spriteMaterial = new THREE.SpriteMaterial({ map:bearTexture });
const sprite = new THREE.Sprite(spriteMaterial);
sprite.position.set(
Math.cos(i)*600,
50,
Math.sin(i)*600
);
sprite.scale.set(150,150,1);
scene.add(sprite);
}

/////////////////////////////////////////////////////
// ‚ú® TEXTO 3D FLOTANTE
/////////////////////////////////////////////////////

const fontLoader = new FontLoader();
fontLoader.load(
'https://threejs.org/examples/fonts/helvetiker_regular.typeface.json',
function(font){

const textGeo = new TextGeometry("Te amo hoy y siempre ‚ù§Ô∏è",{
font:font,
size:40,
height:5
});

const textMat = new THREE.MeshBasicMaterial({ color:0xff66ff });
const textMesh = new THREE.Mesh(textGeo,textMat);
textMesh.position.set(-400,-200,0);
scene.add(textMesh);

});

/////////////////////////////////////////////////////
// üéµ M√öSICA
/////////////////////////////////////////////////////

window.addEventListener("click",()=>{
document.getElementById("music").play();
},{ once:true });

/////////////////////////////////////////////////////
// üé¨ ANIMACI√ìN
/////////////////////////////////////////////////////

function animate(){
requestAnimationFrame(animate);

ring.rotation.z += 0.01;
core.scale.x = 1 + Math.sin(Date.now()*0.003)*0.2;
core.scale.y = 1 + Math.sin(Date.now()*0.003)*0.2;
core.scale.z = 1 + Math.sin(Date.now()*0.003)*0.2;

controls.update();
renderer.render(scene,camera);
}
animate();

window.addEventListener("resize",()=>{
camera.aspect = innerWidth/innerHeight;
camera.updateProjectionMatrix();
renderer.setSize(innerWidth,innerHeight);
});

</script>

</body>
</html>
